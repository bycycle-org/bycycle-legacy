<%inherit file="layout.html"/>


<strong>Select a location:</strong>
<ul class="result_list multi-list">
   % for i, code in enumerate(c.geocodes):
      <li class="${h.cycle('b', 'a')}">${self.geocode(code, i)}</li>
   % endfor
</ul>


<%def name="geocode(geocode, i)">
   <%
      from urllib import unquote_plus
      str_addr = str(geocode.address)
      xy_ll = geocode.xy_ll
      x, y = xy_ll.x, xy_ll.y
      html_addr = str_addr.replace('\n', '<br />')
      field_addr = unquote_plus(geocode.urlStr())
   %>
   <div class="fixed-pane">
      <div class="title-bar" style="display: none;">
         <div class="title">
            Location
            <span class="small">
               <a class="show-on-map-link"
                  href="#show-location-on-map"
                  title="Show this location on the map"
                  onclick="byCycle.UI.map.setCenter({x: ${x}, y: ${y}}); return false;"
                  >show on map</a>
            </span>
         </div>
      </div>   
      <div class="content-pane">
         <div class="address">${html_addr}</div>
         <div class="multi-select-links">
            <a class="show-on-map-link"
               href="#show-location-on-map"
               title="Show this location on the map"
               onclick="byCycle.UI.map.setCenter({x: ${x}, y: ${y}}); return false;"
               >Show on map</a>
            | 
            <a class="select-geocode-link"
               href="#select-this-location"
               title="Select this location"
               onclick="byCycle.UI.selectGeocode(this, ${i}); return false;"
               >Select</a>
         </div>
         <div class="set_as_s_or_e" style="display: none;">
            Set as
            <a class="set-as-start"
               href="#set-as-start"
               title="Use this as the starting point of a route"
               onclick='byCycle.UI.setAsStart("${field_addr}"); return false;'
               ><i>start</i></a> or
            <a class="set-as-end"
               href="#set-as-end"
               title="Use this as the end point of a route"
               onclick='byCycle.UI.setAsEnd("${field_addr}"); return false;'
               ><i>end</i></a>
            of route
         </div>   
</%def>
