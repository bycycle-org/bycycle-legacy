<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:v="urn:schemas-microsoft-com:vml">
  
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=iso-8859-1"/>
    <title>byCycle - Bicycle Trip Planner</title>
    
    <meta name="keywords" 
	  content="bicycle, bike, bicycle trip planner, bicycle route finder, bike trip planner, bike route finder, bicycle route, bicycle trip, bike route, bike trip, bicycle routing, bike routing, maps, bicycle maps, bike maps, bicycle advocacy, community, sustainability, portland, oregon, milwaukee, wisconsin"/>
    
    <meta name="description" 
	  content="byCycle Trip Planner -- A web-based, interactive, bicycle trip planner (route finder) for the Portland, Oregon, Milwaukee, Wisconsin, and, soon, other regions."/>
    
    <link rel="stylesheet" href="css/base.css" type="text/css"/>
    <!--[if IE]>
	<link rel="stylesheet" href="css/base_ie.css" type="text/css"/>
	<![endif]-->
    
    <script type="text/javascript">
      //<![CDATA[
      function afterPageLoad()
      {
	resizeMap();
	elTag0('html').style.overflow = 'hidden';
	elTag0('body').style.overflow = 'hidden';
	if (api_key) {
	  if (mapLoad()) {
	    // do nothing for now
	  } else {
  	    setIH('map', 'Error loading map.');
	  }
	} else {
	  setIH('map', 'Error loading map: Could not find valid API key for ' + 
	  base_url + '.');
        }
        var status = elV('http_status');
        var response_text = unescape(elV('response_text'));
        if (status && response_text != '""') {
          var req = {status: parseInt(status), responseText: response_text};
          _callback(req);
        }
      }
      if(window.addEventListener)
	window.addEventListener('load', afterPageLoad, false);
      else if(document.addEventListener)
        document.addEventListener('load', afterPageLoad, false);
      else if(window.attachEvent)
        window.attachEvent('onload', afterPageLoad);
      //]]>
    </script>

    <script src="js/util.js" type="text/javascript"></script>
    <script src="js/ginit.js" type="text/javascript"></script>
    <script src="js/ajax.js" type="text/javascript"></script>
    <script src="js/regions.js" type="text/javascript"></script>
    <script src="js/gmap.js" type="text/javascript"></script>
    <script src="js/ui.js" type="text/javascript"></script>
  </head>
  
  <body onresize="resizeMap();" onunload="if (map) GUnload();">
    <div id="content_pane">
      <!-- Header -->
      <div id="header" class="page_section">
	<table>
	  <tr>
	    <td style="width: 305px;">
	      <!-- Logo -->
	      <div id="logo">
		<a href="http://www.bycycle.org/" title="byCycle Home Page">byCycle</a>
		<a href="/">Trip Planner</a>
	      </div>
	    </td>

	    <td>
	      <form id="region_form" class="input_form"
		    action="." 
		    method="get" 
		    onsubmit="return false;">
		<div>
		  <select id="region" name="region" 
			  tabindex="2"
			  title="Set the active region and zoom into it"
			  onchange="selectRegion(this.options[this.selectedIndex].value);">
		    <option value="">-- Select Region --</option>
		    <option value="">All Regions</option>
		    %(regions_opt_list)s			    
		  </select>
		  
		  <noscript>
		    <input class="input_button"
			   title="Click to go to region"
			   tabindex="3" 
			   type="submit" 
			   value="Go!"/>		      
		  </noscript>
		</div>
	      </form>
	    </td>
	    
	    <td>
	      <!-- Links -->
	      <div id="links">
		<a href="http://www.bycycle.org/tripplanner"
		  title="Get more information about the Trip Planner"
		  >About</a>
		
		&middot;
		
		<a href="http://www.bycycle.org/contact.html" 
		  title="Send us problem reports, comments, questions, and suggestions"
		  >Feedback</a>

		&middot;
		
		<a href="http://www.bycycle.org/tripplanner/help.html" 
		  title="Get help on using the Trip Planner"
		  >Help</a>

		&middot;
		
		<a href="http://www.bycycle.org/tripplanner/linkhere.html" 
		  title="Link your site to this page"
		  >Link Here</a>

		&middot;
		
		<a href="http://www.bycycle.org/support.html" 
		   title="Get involved, buy a shirt, donate, ..."
		   >Support This Project</a>
	      </div>
	    </td>
	  </tr>
	</table>
      </div>

      <!-- Content -->
      <div id="content" class="page_section">
	<table id="content_table">
	  <!--[if IE]>
	  <colgroup><col width="300"/><col width="*"/></colgroup>
	  <![endif]-->
	  
	  <tr>
	    <td id="left_panel" class="panel">
	      <!-- Input -->
	      <div id="input">
		
		<!-- Geocode Form -->
		<form id="geocode_form" class="input_form"
		      action="." 
		      method="get" 
		      onsubmit="doFind('geocode'); return false;">
		  
		  <div class="input_title">Find an Address</div>
		  
		  <div>
		    <input type="hidden" name="region" value="%(region)s"/>
		    <input type="hidden" name="service" value="query"/>
		    <input type="text" id="q" name="q" class="input_field" tabindex="1" value="%(q)s"/>
		    <input name="gb"
			   class="input_button"
			   title="Click to look up address"
			   tabindex="3" 
			   type="submit" 
			   value="Go!"/>
		  </div>
		</form>

		<!-- Route Form -->
		<form id="route_form" class="input_form"
		      action="." 
		      method="get" 
		      onsubmit="doFind('route'); return false;"
		      style="margin-bottom: 0;">

		  <div class="input_title">Find a Route</div>
		  
		  <div>
		    <input type="hidden" name="region" value="%(region)s"/>
		    <input type="hidden" name="service" value="route"/>
		    <input type="text" id="fr" name="fr" class="input_field" tabindex="1" value="%(fr)s"/>
		    <a href="javascript:void(0);"  
		       title="Swap from and to" 
		       onclick="swapFrAndTo();"
		       ><img src="images/swapfrto.gif" alt="swap"/></a>
		  </div>
		  
		  <div>
		    <input type="text" id="to" name="to" class="input_field" tabindex="1" value="%(to)s"/>
		    <input name="rb"
			   class="input_button"
			   title="Click to find route"
			   tabindex="3" 
			   type="submit" 
			   value="Go!"/>
		  </div>
		  
		  <!--
		  <div id="pref_div">
		    <i>Note: Preferences work only for the Portland region.</i>
		    <select id="pref" name="pref">
		      <option value="default">- Select Route Preference -</option>
		      <option value="safer">Safer</option>
		      <option value="faster">Faster</option>
		      <option value="flatter">Flatter</option>
		      <option value="shorter">Shorter</option>
		    </select>
		  </div>
		  -->

		</form>
	      </div><!-- Input -->

	      <div id="result">
		%(result)s	      
	      </div>
	    </td><!-- left_panel -->
	    
	    <td id="right_panel" class="panel">
	      <div id="map_menu" class="page_section">
		<a href="javascript:void(0);"
		   title="Find address nearest to red dot at center of map"
		   onclick="setElVToMapLonLat('q'); doFind('geocode');"
		   >Find address at center of map</a>		
		&middot;
		<a href="/"
		   title="Clear everything from the map"
		   onclick="clearMap(); return false;"
		   >Clear Map</a>
	      </div>
	      
	      <div id="map">
		<noscript>
		  <div style="font-style: italic; padding: 5px;">
		    <p>
		      To display a map here, JavaScript must be enabled in your browser. 
		      If you would like to view the map, please enable JavaScript and 
		      <a href="">try again</a>.
		    </p>
		    <p>
		      Note that you must have a relatively recent browser for the map to 
		      display. We test in <a href="http://www.mozilla.com/">Mozilla Firefox</a> 
		      on Linux, Mac OS X, and Windows; Safari on Mac OS X; and Internet Explorer 
		      on Windows.
		    </p>
		    <p>
		      If you don't have one of the above browsers, you may want to leave JavaScript 
		      turned off. On the other hand, if you feel like experimenting, you can
		      <a href="mailto:feedback@bycycle.org">let us know</a> if the Trip Planner does 
		      or does not work in other browsers.
		    </p>
		  </div>
		</noscript>
	      </div>

	      <div id="footer">
		<a href="http://www.bikeportland.org/">For daily news and views on the Portland bike scene visit BikePortland.org</a>
	      </div>
	    </td><!-- right_panel -->
	  </tr>    
	</table>
      </div><!-- Content -->
    </div><!-- Content Pane --> 

    <input type="hidden" id="http_status" name="http_status" value="%(http_status)s"/>
    <input type="hidden" id="response_text" name="response_text" value='%(response_text)s'/> 
  </body>
</html>
